<div>
 <div class="article-formatted-body article-formatted-body article-formatted-body_version-1">
  <div xmlns="http://www.w3.org/1999/xhtml">
   <div style="text-align:center;">
    <img src="https://habrastorage.org/r/w1560/webt/r0/he/5x/r0he5xgae-8b02pbm7mxz_iqs4w.png" data-src="https://habrastorage.org/webt/r0/he/5x/r0he5xgae-8b02pbm7mxz_iqs4w.png">
   </div><br> Консоль Linux обычно имеет дисплей с клавиатурой и используется для подключения к главному компьютеру для обмена данными и отображения результатов обработки. В большинстве случаев сама обработка выполняется хост-компьютером. Однако есть гики, которые хотят на консоли просматривать веб-страницы, и есть программное обеспечение, такие как текстовые браузеры типа «Browsh», которые могут отображать веб-сайты в графическом виде без графического интерфейса.<br> <br> Большинство основных дистрибутивов Linux поставляются с предустановленными Firefox или Falkon. И идея текстового браузера для консоли Linux может показаться абсурдной. В конце концов, первые браузеры были основаны на графическом интерфейсе, а современный Интернет так вообще состоит из графики и JavaScript — элементов, с которыми консольным браузерам трудно или даже невозможно работать. Но именно эта несовместимость с современной Сетью делает консольные браузеры такими привлекательными для некоторых пользователей. Для этого есть несколько причин. Интерфейсы таких браузеров чрезвычайно просты в компоновке и работают очень быстро. Текстовые браузеры требуют меньше пропускной способности для работы, и загружают страницы намного быстрее, чем графические. Кроме того, графические браузеры потребляют больше ресурсов ЦП для Javascript, CSS и т. д. Также изображения, автоматически воспроизводимые видео и звуковые эффекты могут отвлекать внимание пользователя.<br> <br> Но как можно сохранить малое потребление ресурсов ЦП текстовых браузеров, при этом отображая графику через консоль?<br> <br> Через Carbonyl.<br> <a name="habracut"></a><br>
   <h2><font color="#1c22be">❯</font><font color="#454cee">Сколько вешать...</font></h2><br> Консольные браузеры позволяют просматривать веб-страницы на компьютерах с исключительно низкой пропускной способностью и низкими характеристиками, а также блокируют отвлекающие факторы и дают больший контроль над конфиденциальностью.<br> <br> На момент написания статьи домашняя страница Lenta.ru весила почти 10 МБ (замерено через 2ip.ru). Это довольно много (оптимально веб-страницы должны весить не больше 3 МБ). Если вы посещаете новостные порталы или другие сайты каждый день с помощью обычного браузера, потребление трафика может быстро увеличиться, а это уже влетит вам в копеечку. Если вы используете браузер через консоль, вы загружаете HTML, но не изображения, видео и рекламу, экономя десятки, а то и сотни МБ в течение дня. JavaScript также не выполняется в <a href="https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BA%D1%81%D1%82%D0%BE%D0%B2%D1%8B%D0%B9_%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80">текстовом браузере</a>, а это означает, что программные платные сети, такие как <b>The New York Times</b>, не срабатывают. Вы можете читать столько статей, сколько хотите, без перерывов и бесплатно.<br> <br> Новый браузер Carbonyl, основан на движке Chromium и способен отображать на консоли любой сайт, включая YouTube. Браузер поддерживает почти все веб-API, включая WebGL, WebGPU и инструменты для воспроизведения видео, звука и анимации. Работа возможна как при прямом запуске консоли, так и при подключении по SSH. Carbonyl можно назвать лучшим браузером Linux. Это полноценный браузер, который соответствует и совместим с современными стандартами, а это означает, что страницы открываются так, как должны, и пользователь может смотреть потоковое видео в консоли Linux.<br> <br>
   <div style="text-align:center;">
    <img src="https://habrastorage.org/r/w1560/webt/pq/fk/0f/pqfk0fplegpx_k_oohatzbwfgus.png" data-src="https://habrastorage.org/webt/pq/fk/0f/pqfk0fplegpx_k_oohatzbwfgus.png">
   </div><br> Все консольные браузеры имеют ограничения: <a href="https://ru.wikipedia.org/wiki/Lynx_(%D0%B1%D1%80%D0%B0%D1%83%D0%B7%D0%B5%D1%80)">Lynx</a> — старейший браузер из тех, которые до сих пор поддерживается, функциональный и мало потребляет трафик, но не поддерживает мультимедиа любого типа. <a href="https://ru.wikipedia.org/wiki/W3m">w3m</a> может отображать изображения, но полностью нарушает форматирование и имеет тенденцию тормозить и зависать. <a href="https://ru.wikipedia.org/wiki/Browsh">Browsh</a>, который работает, запуская Firefox в автономном режиме и подключаясь к нему через протокол автоматизации, достаточно ресурсоёмкий и медленный, и, несмотря на лежащий в его основе стек Firefox, тоже имеет серьёзные проблемы с форматированием.<br> <br> Carbonyl является ответвлением проекта <a href="https://ru.wikipedia.org/wiki/Chromium">Google Chromium</a> и не имеет ни одной из упомянутых выше проблем. Страницы открываются и отображаются мгновенно — быстрее, чем браузер с графическим интерфейсом на рабочем столе. Использование ресурсов невелико, особенно если запускать Linux без среды рабочего стола. Более того, Carbonyl обладает почти всеми возможностями обычного Chromium. Можно смотреть видео на YouTube или играть в онлайн-игры такие, как например Doom. Миниатюры предварительного просмотра видео, GIF-файлы запускаются автоматически.<br> <br> К сожалению, в настоящее время расширения не поддерживаются, хотя, вероятно, будут в будущем.<br> <br>
   <div style="text-align:center;">
    <img src="https://habrastorage.org/r/w1560/webt/um/_x/37/um_x37hsin8nae5qk7ztywza6eo.png" data-src="https://habrastorage.org/webt/um/_x/37/um_x37hsin8nae5qk7ztywza6eo.png">
   </div><br> В то время как вход в онлайн-аккаунты является рутиной с такими браузерами, как Lynx, с Carbonyl можно быстро и без усилий войти в <b>Gmail</b>, <b>Slack</b>, <b>Asana</b> и <b>OpenAI</b>. Carbonyl протестирован на ряде консолях Linux, включая XFCE, GNOME, kitty и Cool Retro Terminal. Браузер был плавным и быстрым на всех. Также Carbonyl удалённо запускается на Raspberry Pi через SSH в ЭЛТ.<br> <br>
   <h2><font color="#1c22be">❯</font><font color="#454cee">Как запустить Carbonyl на консоли Linux</font></h2><br> Carbonyl доступен в виде образа Docker, поэтому убедитесь, что у вас установлен Docker и что ваш аккаунт входит в группу Docker.<br> <br> Загрузите образ Carbonyl Docker:<br> <br> <code>docker run -ti fathyb/carbonyl https://duckduckgo.com</code><br> <br>
   <div style="text-align:center;">
    <img src="https://habrastorage.org/r/w1560/webt/bu/-v/u8/bu-vu8qpm1yunaeyvwyxooqeo7w.png" data-src="https://habrastorage.org/webt/bu/-v/u8/bu-vu8qpm1yunaeyvwyxooqeo7w.png">
   </div><br> При первом запуске этой команды придётся подождать до нескольких минут, пока образы будут загружены, но при любом последующем использовании Carbonyl запустится мгновенно.<br> <br> Carbonyl не имеет встроенной панели поиска, и нужно ввести любой URL-адрес в качестве аргумента командной строки. Оказавшись на странице, можно использовать мышку, чтобы переходить по ссылкам, вводить текст в текстовые поля и сёрфить как обычно.<br> <br> Carbonyl представляет веб-контент, используя шрифты вашей консоли для текста и сплошные цветные блоки для изображений, поэтому ожидайте пикселизации с низким разрешением при просмотре. Качество изображения можно значительно улучшить, уменьшив размер шрифта консоли, хотя будет означать, что текст окажется нечитаемым. Ещё один небольшой недостаток заключается в том, что Carbonyl не передает аудио в потоковом режиме, поэтому, если вы вдруг решите использовать его для просмотра фильмов онлайн, то вам придётся включить субтитры.<br> <br> <a href="https://github.com/fathyb/carbonyl">Carbonyl на GitHub</a>.<br> <br>
   <div style="text-align:center;">
    <img src="https://habrastorage.org/r/w1560/webt/b2/tn/li/b2tnlinn08keiq7qk66poqz0adq.png" data-src="https://habrastorage.org/webt/b2/tn/li/b2tnlinn08keiq7qk66poqz0adq.png">
   </div><br> <b>Fathy Boundjadj</b>, один из разработчиков Carbonyl, изначально работал над программой под названием <b>html2svg</b>, написанный на Rust, и который преобразует веб-страницы в векторные (SVG, PDF) или растровые изображения (PNG, JPEG, WebP). html2svg включён как среда выполнения Carbonyl. По словам Фати, помимо гарантии того, что консоль может «отрисовывать моноширинные символы в фиксированной сетке», он мало что может сделать, как правило, «перемещать курсор», «отображать символы Unicode» и «устанавливать цвет фона и цвет переднего плана».<br> <br> Для отображения графики задействованы возможности консоли, такие как <a href="https://habr.com/ru/post/161999/">xterm-256</a>, который выводит unicode-символы в цвете — в качестве виртуального пикселя используется символ U+2584 ("▄"). Пользуясь тем, что соотношение сторон в этом символе 1:2, имеется возможность отображения на его основе двух квадратных пикселей, верхний из которых задаёт цвет фона, а нижний — переднего плана.<br> <br> Для отслеживания движения мыши, перемещения курсора и изменения цвета текста используются escape-последовательности xterm. Для терминала xterm возможно задействование RGB-палитры 6x6x6, а при установке <a href="http://rus-linux.net/kos.php?name=/book1/gl-08/gl_08_08.html">режима COLORTERM</a> — 24-разрядной полноцветной палитры RGB. Текст отрисовывается в фиксированном размере, отдельно от изображений. Для перехвата текста в библиотеке Skia подключается отдельный обработчик. Код отрисовки оптимизирован для работы в терминале и позволяет выводить графику с частотой обновления на уровне 60 FPS с минимальной нагрузкой на CPU.<br> <br> Через html2svg вот так открывается страница YouTube с помощью эмулятора консоли.<br> <br>
   <div style="text-align:center;">
    <img src="https://habrastorage.org/r/w1560/webt/el/lg/lh/ellglhbxnchyyts1jicywmvio7w.png" data-src="https://habrastorage.org/webt/el/lg/lh/ellglhbxnchyyts1jicywmvio7w.png">
   </div><br> <br> После <a href="https://fathy.fr/carbonyl">улучшения анимации и прокрутки</a>, решения проблем с макетом, Carbonyl сможет отображать Википедию или воспроизводить DOOM.<br> <br>
   <div class="oembed">
    <div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/63e613ed396453e03448aa0d" data-style="" id="63e613ed396453e03448aa0d" width=""></div>
   </div><br>
   <div class="oembed">
    <div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/63e613eda9cdfde04234497b" data-style="" id="63e613eda9cdfde04234497b" width=""></div>
   </div><br>
   <div class="oembed">
    <div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/63e613edd791666fa212c5c6" data-style="" id="63e613edd791666fa212c5c6" width=""></div>
   </div><br>
   <div class="oembed">
    <div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/63e613ed200df56fc193306a" data-style="" id="63e613ed200df56fc193306a" width=""></div>
   </div><br> <br> <a href="https://timeweb.cloud//vds-vps?utm_source=habr&amp;utm_medium=banner&amp;utm_campaign=vds-promo-6-rub"><img src="https://habrastorage.org/r/w1560/webt/p-/u9/l2/p-u9l27ynelxi92bcmdxhu76ma8.png" data-src="https://habrastorage.org/webt/p-/u9/l2/p-u9l27ynelxi92bcmdxhu76ma8.png"></a>
  </div>
 </div>
</div> <!----> <!---->